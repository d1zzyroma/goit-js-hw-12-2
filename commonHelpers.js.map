{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport async function getImages(value, currentPage){\n    const BASE_URL = \"https://pixabay.com\";\n    const END_POINT = \"/api/\";\n    \n    const params = new URLSearchParams({\n        key: \"44030880-e45e37f6dd8504bc3a71fd6c0\",\n        q: value,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: \"true\",\n        page: `${currentPage}`,\n        per_page: \"15\"\n    })\n    \n    const url = `${BASE_URL}${END_POINT}?${params}`;\n\n    return await axios.get(url);\n}\n\n","export function createMarkup(hits){\n      return hits.map(hit => \n         `\n         <li class=\"gallery-item\">\n         <a href=\"${hit.largeImageURL}\" class=\"gallery-link\">\n           <img src=\"${hit.webformatURL}\" alt=\"${hit.tags}\" width=\"358px\" height=\"150\">\n         </a>\n         <div class=\"inf-wrapper\">\n           <div class=\"likes item\">\n             <p class=\"text-one\">Likes</p>\n             <p class=\"likes-count text-two\">${hit.likes}</p>\n           </div>\n           <div class=\"views item\">\n             <p class=\"text-one\">Views</p>\n             <p class=\"views-count text-two\">${hit.views}</p>\n           </div>\n           <div class=\"comments item\">\n             <p class=\"text-one\">Comments</p>\n             <p class=\"comments-count text-two\">${hit.comments}</p>\n           </div>\n           <div class=\"downloads item\">\n             <p class=\"text-one\">Downloads</p>\n             <p class=\"downloads-count text-two\">${hit.downloads}</p>\n           </div>\n         </div>\n       </li>\n        `\n    ).join(\"\");\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getImages } from \"./js/pixabay-api\";\nimport { createMarkup } from \"./js/render-function\";\n\n\nconst refs = {\n    formEl: document.querySelector(\".form\"),\n    inputFormEl: document.querySelector(\".form-input\"),\n    buttonFormEl: document.querySelector(\".form-button\"),\n    gallery: document.querySelector(\".gallery\"),\n    loader: document.querySelector(\".loader\"),\n    parent: document.querySelector(\".parent\"),\n    buttonLoadMore: document.querySelector(\".btn-more\")\n    \n};\n\n\nrefs.formEl.addEventListener(\"submit\", handleSubmit);\n\nlet currentPage = 1;\nlet globalInputValue = \"\";\n\nfunction handleSubmit(event) {\n    event.preventDefault();\n    refs.gallery.innerHTML = \"\";\n    const inputValue = refs.inputFormEl.value.trim();\n    currentPage = 1;\n    \n    globalInputValue = inputValue;\n    \n    showLoader();\n\n    getImages(inputValue, currentPage)\n                                        .then(response => {\n                                            if (response.data.hits.length > 0) {\n                                                const markup = createMarkup(response.data.hits);\n                                                refs.gallery.insertAdjacentHTML(\"beforeend\", markup);\n                                                let galleryImages = new SimpleLightbox('.gallery a', {\n                                                    showCounter: false,\n                                                    captionsData: \"alt\",\n                                                    captionDelay: 250\n                                                });\n\n                                                galleryImages.refresh();\n                                                \n                                            } else {\n                                                iziToast.show({\n                                                    title: 'Error',\n                                                    message: 'What would you like to add?',\n                                                    position: \"topRight\",\n                                                    color: \"rgba(239, 64, 64, 1)\",\n                                                    icon: \"fas fa-exclamation-circle\"\n                                                });\n                                                refs.buttonLoadMore.style.display = \"none\";\n                                            }\n\n                                            if(refs.gallery.children.length > 0){\n                                                refs.buttonLoadMore.style.display = \"inline\"\n                                            };\n                                            \n                                        })\n\n                                        .catch(error => console.log(error))\n                                        \n                                        .finally(() => {\n                                            hideLoader();\n                                            \n                                        });\n                                        \n}\n\n\nfunction showLoader() {\n    refs.loader.style.display = \"inline-block\";\n    refs.parent.style.display = \"grid\";\n}\n  \nfunction hideLoader() {\n    refs.loader.style.display = \"none\";\n    refs.parent.style.display = \"none\";\n}\n\n\nrefs.buttonLoadMore.addEventListener(\"click\", handleLoadMore);\n\nfunction handleLoadMore(){\n    currentPage += 1;\n    showLoader();\n    getImages(globalInputValue, currentPage)\n\n                                            .then(response => {\n\n                                                if (response.data.hits.length > 0) {\n                                                    const markup = createMarkup(response.data.hits);\n                                                    refs.gallery.insertAdjacentHTML(\"beforeend\", markup);\n\n                                                    let galleryImages = new SimpleLightbox('.gallery a', {\n                                                        showCounter: false,\n                                                        captionsData: \"alt\",\n                                                        captionDelay: 250\n                                                    });\n\n                                                    galleryImages.refresh();\n                                                } \n\n                                                \n                                                if(response.data.totalHits === refs.gallery.children.length){\n                                                    iziToast.show({\n                                                        title: 'Error',\n                                                        message: \"We're sorry, but you've reached the end of search results.\",\n                                                        position: \"topRight\",\n                                                        color: \"rgba(239, 64, 64, 1)\",\n                                                        icon: \"fas fa-exclamation-circle\"\n                                                    });\n                                                    refs.buttonLoadMore.style.display = \"none\";\n                                                }\n                                                const galleryItem = document.querySelector(\".gallery-item\");\n                                                galleryItem.getBoundingClientRect();\n                                                window.scrollBy({\n                                                    top: 340,\n                                                    left: 0,\n                                                    behavior: \"smooth\",\n                                                  });\n                                            })\n\n                                            .catch(error => console.log(error))\n                                            .finally(() => {\n                                                hideLoader();\n                                            });\n\n}\n\n"],"names":["getImages","value","currentPage","BASE_URL","END_POINT","params","url","axios","createMarkup","hits","hit","refs","handleSubmit","globalInputValue","event","inputValue","showLoader","response","markup","SimpleLightbox","iziToast","error","hideLoader","handleLoadMore"],"mappings":"owBAEO,eAAeA,EAAUC,EAAOC,EAAY,CAC/C,MAAMC,EAAW,sBACXC,EAAY,QAEZC,EAAS,IAAI,gBAAgB,CAC/B,IAAK,qCACL,EAAGJ,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAM,GAAGC,CAAW,GACpB,SAAU,IAClB,CAAK,EAEKI,EAAM,GAAGH,CAAQ,GAAGC,CAAS,IAAIC,CAAM,GAE7C,OAAO,MAAME,EAAM,IAAID,CAAG,CAC9B,CCnBO,SAASE,EAAaC,EAAK,CAC5B,OAAOA,EAAK,IAAIC,GACb;AAAA;AAAA,oBAEWA,EAAI,aAAa;AAAA,uBACdA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,+CAKVA,EAAI,KAAK;AAAA;AAAA;AAAA;AAAA,+CAITA,EAAI,KAAK;AAAA;AAAA;AAAA;AAAA,kDAINA,EAAI,QAAQ;AAAA;AAAA;AAAA;AAAA,mDAIXA,EAAI,SAAS;AAAA;AAAA;AAAA;AAAA,SAKhE,EAAM,KAAK,EAAE,CACb,CCnBA,MAAMC,EAAO,CACT,OAAQ,SAAS,cAAc,OAAO,EACtC,YAAa,SAAS,cAAc,aAAa,EACjD,aAAc,SAAS,cAAc,cAAc,EACnD,QAAS,SAAS,cAAc,UAAU,EAC1C,OAAQ,SAAS,cAAc,SAAS,EACxC,OAAQ,SAAS,cAAc,SAAS,EACxC,eAAgB,SAAS,cAAc,WAAW,CAEtD,EAGAA,EAAK,OAAO,iBAAiB,SAAUC,CAAY,EAEnD,IAAIV,EAAc,EACdW,EAAmB,GAEvB,SAASD,EAAaE,EAAO,CACzBA,EAAM,eAAc,EACpBH,EAAK,QAAQ,UAAY,GACzB,MAAMI,EAAaJ,EAAK,YAAY,MAAM,KAAI,EAC9CT,EAAc,EAEdW,EAAmBE,EAEnBC,IAEAhB,EAAUe,EAAYb,CAAW,EACI,KAAKe,GAAY,CACd,GAAIA,EAAS,KAAK,KAAK,OAAS,EAAG,CAC/B,MAAMC,EAASV,EAAaS,EAAS,KAAK,IAAI,EAC9CN,EAAK,QAAQ,mBAAmB,YAAaO,CAAM,EAC/B,IAAIC,EAAe,aAAc,CACjD,YAAa,GACb,aAAc,MACd,aAAc,GAClE,CAAiD,EAEa,QAAO,CAErE,MACgDC,EAAS,KAAK,CACV,MAAO,QACP,QAAS,8BACT,SAAU,WACV,MAAO,uBACP,KAAM,2BAC1D,CAAiD,EACDT,EAAK,eAAe,MAAM,QAAU,OAGrCA,EAAK,QAAQ,SAAS,OAAS,IAC9BA,EAAK,eAAe,MAAM,QAAU,SAGpF,CAAyC,EAEA,MAAMU,GAAS,QAAQ,IAAIA,CAAK,CAAC,EAEjC,QAAQ,IAAM,CACXC,GAE5C,CAAyC,CAEzC,CAGA,SAASN,GAAa,CAClBL,EAAK,OAAO,MAAM,QAAU,eAC5BA,EAAK,OAAO,MAAM,QAAU,MAChC,CAEA,SAASW,GAAa,CAClBX,EAAK,OAAO,MAAM,QAAU,OAC5BA,EAAK,OAAO,MAAM,QAAU,MAChC,CAGAA,EAAK,eAAe,iBAAiB,QAASY,CAAc,EAE5D,SAASA,GAAgB,CACrBrB,GAAe,EACfc,IACAhB,EAAUa,EAAkBX,CAAW,EAEE,KAAKe,GAAY,CAEd,GAAIA,EAAS,KAAK,KAAK,OAAS,EAAG,CAC/B,MAAMC,EAASV,EAAaS,EAAS,KAAK,IAAI,EAC9CN,EAAK,QAAQ,mBAAmB,YAAaO,CAAM,EAE/B,IAAIC,EAAe,aAAc,CACjD,YAAa,GACb,aAAc,MACd,aAAc,GACtE,CAAqD,EAEa,QAAO,CACxB,CAGEF,EAAS,KAAK,YAAcN,EAAK,QAAQ,SAAS,SACjDS,EAAS,KAAK,CACV,MAAO,QACP,QAAS,6DACT,SAAU,WACV,MAAO,uBACP,KAAM,2BAC9D,CAAqD,EACDT,EAAK,eAAe,MAAM,QAAU,QAEpB,SAAS,cAAc,eAAe,EAC9C,sBAAqB,EACjC,OAAO,SAAS,CACZ,IAAK,IACL,KAAM,EACN,SAAU,QAC9D,CAAmD,CACnD,CAA6C,EAEA,MAAMU,GAAS,QAAQ,IAAIA,CAAK,CAAC,EACjC,QAAQ,IAAM,CACXC,GAChD,CAA6C,CAE7C"}