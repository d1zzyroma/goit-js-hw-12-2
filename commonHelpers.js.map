{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport async function getImages(value, currentPage){\n    const BASE_URL = \"https://pixabay.com\";\n    const END_POINT = \"/api/\";\n    \n    // const params = new URLSearchParams({\n    //     key: \"44030880-e45e37f6dd8504bc3a71fd6c0\",\n    //     q: value,\n    //     image_type: \"photo\",\n    //     orientation: \"horizontal\",\n    //     safesearch: \"true\",\n    //     page: `${currentPage}`,\n    //     per_page: \"15\"\n    // })\n    const params = new URLSearchParams();\n    params.append('key', '44030880-e45e37f6dd8504bc3a71fd6c0');\n    params.append('q', `${value}`);\n    params.append('image_type', 'photo');\n    params.append('orientation', 'horizontal');\n    params.append('safesearch', 'true');\n    params.append('page', `${currentPage}`);\n    params.append('per_page', '15');\n\n    const url = `${BASE_URL}${END_POINT}?${params}`;\n    try{\n        return await axios.get(url);\n    }\n    catch(error){\n        console.error(error.message)\n    }\n    \n\n    \n}\n\n","export function createMarkup(hits){\n      return hits.map(hit => \n         `\n         <li class=\"gallery-item\">\n         <a href=\"${hit.largeImageURL}\" class=\"gallery-link\">\n           <img src=\"${hit.webformatURL}\" alt=\"${hit.tags}\" width=\"358px\" height=\"150\">\n         </a>\n         <div class=\"inf-wrapper\">\n           <div class=\"likes item\">\n             <p class=\"text-one\">Likes</p>\n             <p class=\"likes-count text-two\">${hit.likes}</p>\n           </div>\n           <div class=\"views item\">\n             <p class=\"text-one\">Views</p>\n             <p class=\"views-count text-two\">${hit.views}</p>\n           </div>\n           <div class=\"comments item\">\n             <p class=\"text-one\">Comments</p>\n             <p class=\"comments-count text-two\">${hit.comments}</p>\n           </div>\n           <div class=\"downloads item\">\n             <p class=\"text-one\">Downloads</p>\n             <p class=\"downloads-count text-two\">${hit.downloads}</p>\n           </div>\n         </div>\n       </li>\n        `\n    ).join(\"\");\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getImages } from \"./js/pixabay-api\";\nimport { createMarkup } from \"./js/render-function\";\n\n\nconst refs = {\n    formEl: document.querySelector(\".form\"),\n    inputFormEl: document.querySelector(\".form-input\"),\n    buttonFormEl: document.querySelector(\".form-button\"),\n    gallery: document.querySelector(\".gallery\"),\n    loader: document.querySelector(\".loader\"),\n    parent: document.querySelector(\".parent\"),\n    buttonLoadMore: document.querySelector(\".btn-more\")\n    \n};\n\nconst galleryImages = new SimpleLightbox('.gallery a', {\n    showCounter: false,\n    captionsData: \"alt\",\n    captionDelay: 250\n});\n\nrefs.formEl.addEventListener(\"submit\", handleSubmit);\n\nlet currentPage = 1;\nlet globalInputValue = \"\";\n\nasync function handleSubmit(event) {\n    event.preventDefault();\n    refs.gallery.innerHTML = \"\";\n    const inputValue = refs.inputFormEl.value.trim();\n    currentPage = 1;\n    \n    globalInputValue = inputValue;\n    \n    showLoader();\n\n    try {\n        const response = await getImages(inputValue, currentPage);\n\n        if (response.data.hits.length > 0) {\n            const markup = createMarkup(response.data.hits);\n            refs.gallery.insertAdjacentHTML(\"beforeend\", markup);\n            galleryImages.refresh();\n\n            if (refs.gallery.children.length > 0) {\n                refs.buttonLoadMore.style.display = \"inline\";\n            }\n\n            if (response.data.totalHits === refs.gallery.children.length) {\n                refs.buttonLoadMore.style.display = \"none\";\n            }\n        } else {\n            iziToast.show({\n                title: 'Error',\n                message: 'What would you like to add?',\n                position: \"topRight\",\n                color: \"rgba(239, 64, 64, 1)\",\n                icon: \"fas fa-exclamation-circle\"\n            });\n            refs.buttonLoadMore.style.display = \"none\";\n        }\n    } catch (error) {\n        console.log(error);\n    } finally {\n        hideLoader();\n    }\n}\n    \n\n\nfunction showLoader() {\n    refs.loader.style.display = \"inline-block\";\n    refs.parent.style.display = \"grid\";\n}\n  \nfunction hideLoader() {\n    refs.loader.style.display = \"none\";\n    refs.parent.style.display = \"none\";\n}\n\n\nrefs.buttonLoadMore.addEventListener(\"click\", handleLoadMore);\n\nasync function handleLoadMore(){\n    currentPage += 1;\n    showLoader();\n    try{\n        const response = await getImages(globalInputValue, currentPage)\n\n        if (response.data.hits.length > 0) {\n            const markup = createMarkup(response.data.hits);\n            refs.gallery.insertAdjacentHTML(\"beforeend\", markup);\n            galleryImages.refresh();\n        } \n        if(response.data.totalHits === refs.gallery.children.length){\n            iziToast.show({\n                title: 'Error',\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\",\n                color: \"rgba(239, 64, 64, 1)\",\n                icon: \"fas fa-exclamation-circle\"\n            });\n            refs.buttonLoadMore.style.display = \"none\";\n        }\n\n        const galleryItem = document.querySelector(\".gallery-item\");\n        galleryItem.getBoundingClientRect();\n        window.scrollBy({\n            top: 50,\n            left: 0,\n            behavior: \"smooth\",\n          });\n    }catch(error){\n        console.error(error.message)\n    }finally{\n        hideLoader();\n    }\n}\n\n"],"names":["getImages","value","currentPage","BASE_URL","END_POINT","params","url","axios","error","createMarkup","hits","hit","refs","galleryImages","SimpleLightbox","handleSubmit","globalInputValue","event","inputValue","showLoader","response","markup","iziToast","hideLoader","handleLoadMore"],"mappings":"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"}